(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./app/containers/CategoryViewPage/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/react/index.js"),o=r.n(n),a=r("./node_modules/react-redux/lib/index.js"),c=r("./node_modules/redux/lib/redux.js"),i=r("./node_modules/reselect/es/index.js"),s=r("./app/utils/injectSaga.js"),u=r("./app/containers/CategoryViewPage/reducer.js"),p=function(e){return e.categoryView||u.b},l=r("./app/containers/CategoryViewPage/actions.js"),d=r("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.cjs.js"),m=r("./node_modules/react-router-redux/lib/index.js"),g=r("./app/utils/request.js"),f=r("./app/constants/service-model.js"),v=r("./app/constants/routers.js"),b=r("./app/utils/request-method.js"),y=r("./app/utils/notify.js"),j=regeneratorRuntime.mark(x),h=regeneratorRuntime.mark(k),w=regeneratorRuntime.mark(N),C=regeneratorRuntime.mark(_),O=regeneratorRuntime.mark(S);r("./node_modules/lodash/lodash.js");function x(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.put)(Object(m.push)(v.a));case 2:case"end":return e.stop()}},j)}function k(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.call)(g.a,f.a);case 3:return e=t.sent,t.next=6,Object(d.put)(Object(l.l)(e.data));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(d.put)(Object(l.o)());case 12:case"end":return t.stop()}},h,null,[[0,8]])}function N(e){var t,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.id,n.next=4,Object(d.call)(g.a,"".concat(f.a,"/").concat(t));case 4:return r=n.sent,n.next=7,Object(d.put)(Object(l.n)(r.data));case 7:return n.next=9,Object(d.put)(Object(m.push)("".concat(v.b,"/").concat(t)));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(d.put)(Object(l.o)());case 15:case"end":return n.stop()}},w,null,[[0,11]])}function _(e){var t,r,n,o,a;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,t=e.payload,r=t.id,n=t.category,o={parentId:r,catName:n},c.next=5,Object(d.call)(g.a,f.a,Object(b.b)(o));case 5:if(!(a=c.sent).error){c.next=10;break}Object(y.a)(a.error.message),c.next=14;break;case 10:return c.next=12,Object(d.put)(Object(l.q)(a.data));case 12:return c.next=14,Object(d.put)(Object(l.m)(r));case 14:c.next=20;break;case 16:return c.prev=16,c.t0=c.catch(0),c.next=20,Object(d.put)(Object(l.o)());case 20:case"end":return c.stop()}},C,null,[[0,16]])}function S(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.takeLatest)(l.b,k);case 2:return e.next=4,Object(d.takeLatest)(l.d,N);case 4:return e.next=6,Object(d.takeLatest)(l.g,_);case 6:return e.next=8,Object(d.takeLatest)(l.a,x);case 8:case"end":return e.stop()}},O)}r("./app/containers/CategoryViewPage/style.scss");var P,L=r("./node_modules/react-helmet/lib/Helmet.js"),R=r("./app/constants/questions.js"),D=r("./node_modules/react-router-dom/index.js"),V=r("./app/containers/SectionViewPage/index.js"),E=r("./app/components/LoadingIndicator/index.js");function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t,r,n){P||(P="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&o)for(var c in o)void 0===t[c]&&(t[c]=o[c]);else t||(t=o||{});if(1===a)t.children=n;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];t.children=i}return{$$typeof:P,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U=q(E.a,{}),$=q(V.default,{}),K=q(E.a,{}),M=q(V.default,{}),W=q(L.Helmet,{},void 0,q("title",{},void 0,"CategoryViewPage")),z=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=T(t).call(this,e),r=!o||"object"!==H(o)&&"function"!=typeof o?F(n):o,J(F(r),"escFunction",function(e){27!==e.keyCode||r.state.actionShown||r.props.goHome()}),J(F(r),"onNewCategoryChange",function(e){r.props.saveTempNewCategory(e.target.value)}),J(F(r),"onNewCategorySave",function(e){if(e.keyCode===R.e){var t=r.props.match.params.id;r.props.saveNewChild({id:t,category:r.props.newCatName})}}),J(F(r),"viewChildren",function(e){return function(t){r.props.loadChildCategories(e)}}),J(F(r),"renderCategory",function(e,t){var n=r.props.selectedCat,o="".concat(e.id)==="".concat(n);return q("li",{className:"list-group-item cat-item ".concat(o?"active-link":""),onClick:r.viewChildren(e.id)},t,q("span",{},void 0,e.catName))}),J(F(r),"renderChildCategory",function(e,t){var n=r.props.match.params.id;return q("li",{className:"list-group-item"},t,q(D.Link,{className:"m-l-10 router-link",to:"".concat(v.m,"/").concat(n,"/").concat(e.id)},void 0,e.catName))}),J(F(r),"renderChildCategories",function(){var e=r.props,t=e.childCategories,n=e.childLoading,o=e.error;return n?U:o?$:t?q("ul",{className:"list-group"},void 0,t.map(r.renderChildCategory)):""}),J(F(r),"renderCategories",function(){var e=r.props.categories;return e?q("ul",{className:"list-group"},void 0,e.map(r.renderCategory)):""}),J(F(r),"renderSummary",function(){return q("div",{className:"summary"},void 0,q("div",{className:"col-8 col-sm-6 col-md-6 col-lg-7 summary"},void 0,q("h5",{className:"p-t-5"},void 0,q("span",{className:"btn",onClick:r.props.goHome},void 0,"<<"))))}),r.state={actionShown:!1},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,o.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1);var e=this.props.match.params.id;e&&this.props.loadChildCategories(e),this.props.loadCategories(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.props,t=e.newCatName,r=e.loading,n=e.error;return r?K:n?M:q("article",{},void 0,W,q("div",{className:"category-view-page"},void 0,this.renderSummary(),q("div",{className:"row"},void 0,q("div",{className:"col-md-2"},void 0,this.renderCategories()),q("div",{className:"col-md-10"},void 0,q("input",{type:"text",className:"form-control",value:t,placeholder:R.g.them_sec,onChange:this.onNewCategoryChange,onKeyUp:this.onNewCategorySave}),this.renderChildCategories()))))}}])&&A(r.prototype,n),a&&A(r,a),t}(),B=Object(i.b)({categories:Object(i.a)(p,function(e){return e.categories}),childCategories:Object(i.a)(p,function(e){return e.childCategories}),selectedCat:Object(i.a)(p,function(e){return e.selectedCat}),newCatName:Object(i.a)(p,function(e){return e.newCatName}),loading:Object(i.a)(p,function(e){return e.loading}),childLoading:Object(i.a)(p,function(e){return e.childLoading}),error:Object(i.a)(p,function(e){return e.error})}),G=Object(a.connect)(B,function(e){return{loadCategories:function(t){return e(Object(l.k)(t))},loadChildCategories:function(t){return e(Object(l.m)(t))},saveNewChild:function(t){return e(Object(l.p)(t))},saveTempNewCategory:function(t){return e(Object(l.r)(t))},goHome:function(){return e(Object(l.j)())}}}),Q=Object(s.a)({key:"category-view-page",saga:S});t.default=Object(c.compose)(Q,G)(z)},"./app/containers/CategoryViewPage/style.scss":function(e,t,r){var n=r("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./app/containers/CategoryViewPage/style.scss");"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r("./node_modules/style-loader/lib/addStyles.js")(n,o);n.locals&&(e.exports=n.locals)},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/lib/loader.js!./app/containers/CategoryViewPage/style.scss":function(e,t,r){(e.exports=r("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([e.i,".category-view-page .action a{padding-left:5px;padding-right:5px;border:1px solid transparent}.category-view-page .action a:hover{border:1px solid #41ADDD}.category-view-page .actions{position:relative}.category-view-page .actions .main{float:right}.category-view-page #actions-pop{position:absolute;right:50px;top:10px}.category-view-page #actions-pop a,.category-view-page #actions-pop span{color:#41ADDD}.category-view-page #actions-pop span:hover{cursor:pointer;text-decoration:underline}.category-view-page .cat-item:hover{cursor:pointer}.category-view-page .cat-item span{color:#41ADDD}.category-view-page .cat-item span:hover{cursor:pointer;text-decoration:underline}\n",""])}}]);